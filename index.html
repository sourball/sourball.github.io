<!DOCTYPE html>
<html>
	<body>
		<h1>Band</h1>
		<script>
			var compTime = 15;
			var composing = false;
			var d = new Date();
			var seconds = d.getSeconds();
			var composedSongs = 0;
			var experience = 0;
			var expBrackets = [100, 150, 225, 450, 600];
			var currentLvl = 0;
			
			function poseFunction() {
				document.getElementById("buttonson").setAttribute("disabled","");
				var cDown = 15;
				document.getElementById("buttonson").innerHTML = cDown;
				var id = setInterval(function(){countTry();}, 1000);
				function countTry() {
					
					console.log("yes");
					
					if (cDown == 0){
						document.getElementById("buttonson").innerHTML = "Click me";
						document.getElementById("buttonson").removeAttribute("disabled");
						composedSongs += 1;
						experience += (9 + ((Math.floor(Math.random() * Math.floor(50))-25)/10));
						if (experience > expBrackets[currentLvl]) {experience = 0; currentLvl++;}
						document.getElementById("counter").innerHTML = "Songs composed: " + composedSongs.toString();
						document.getElementById("exp").innerHTML = "Composing level: " + currentLvl.toString() + " (" + experience.toString() + "/" + expBrackets[currentLvl].toString() + " exp to next level)";
						clearInterval(id);
					} 
					else{
						cDown += -1;
						document.getElementById("buttonson").innerHTML = cDown; 
						console.log(cDown);
					}
				}
			}
		</script>
		<p id="countdown">Click the button to compose a song! (15 second cooldown)</p>
		<button onclick="poseFunction()" id="buttonson">Click me</button>
		<p id="counter">Songs composed: 0</p>
		<p id="exp">Composing level: 1 (0/100 exp to next level)</p>
	</body>
</html>