<!DOCTYPE html>
<html>
	<body>
		<h1>Band</h1>
		<script>
			var compTime = 10;
			var composing = false;
			var d = new Date();
			var seconds = d.getSeconds();
			var composedSongs = 0;
			var experience = 0;
			var expBrackets = [100, 150, 225, 450, 600];
			var currentLvl = 0;
			var albums;
			
			function element(id, action, data, subdata) {
				switch(action){
					case "innerHTML":
						document.getElementById(id).innerHTML = data;
						break;
					
					case "set_a":
						document.getElementById(id).setAttribute(data, subdata);
						break;
					
					case "rm_a":
						document.getElementById(id).removeAttribute(data);
						break;
				}
			}
			
			function poseFunction() {
				document.getElementById("buttonson").setAttribute("disabled","");
				var cDown = 10;
				document.getElementById("buttonson").innerHTML = cDown;
				var id = setInterval(function(){countTry();}, 1000);
				function countTry() {
					
					console.log("yes");
					
					if (cDown == 0){
						document.getElementById("buttonson").innerHTML = "Click me";
						document.getElementById("buttonson").removeAttribute("disabled");
						composedSongs += 1;
						experience += (9 + ((Math.floor(Math.random() * Math.floor(50))-25)/10));
						
						if (experience > expBrackets[currentLvl]) {experience -= expBrackets[currentLvl]; currentLvl++;}
						
						document.getElementById("counter").innerHTML = "Songs composed: " + composedSongs.toString();
						element("exp", "innerHTML", "Composing level: " + currentLvl.toString() + " (" + experience.toFixed(1) + "/" + expBrackets[currentLvl].toString() + " exp to next level)");
						clearInterval(id);
						
						if (composedSongs > 10) { element("release","rm_a","disabled"); }
					} 
					else{
						cDown += -1;
						document.getElementById("buttonson").innerHTML = cDown; 
						console.log(cDown);
					}
				}
				
			}
			function releaseAlbum() {
				prompt("Album name: ");
			}
		</script>
		<p id="countdown">Click the button to compose a song! (10 second cooldown)</p>
		<button onclick="poseFunction()" id="buttonson">Click me</button>
		<br><br>
		<button onclick="releaseAlbum()" id="release" disabled="">Once you've got 10 songs, you may release an album</button>
		<p id="counter">Songs composed: 0</p>
		<p id="exp">Composing level: 0 (0/100 exp to next level)</p>
		<table id="albums">
			<b>Albums</b>
		</table>
	</body>
</html>