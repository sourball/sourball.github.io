<!DOCTYPE html>
<html>
	<head>
		<link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet'>
		<style>
			body {
				font-family: 'Roboto';font-size: 16px;
			}
			
			table {
				border-collapse: collapse;
				width: 25%;
			}
			
			.init {
				height: 30px;
			}
			
			.initrows {
				padding-left: 5px;
			}
			
			.leftalign {
				text-align: left;
			}
			</style>
		</head>
	<body>
		<h1>Band</h1>
		<script>
			var compTime = 10;
			var composing = false;
			var d = new Date();
			var seconds = d.getSeconds();
			var compositions = 0;
			var experience = 0;
			var expBrackets = [100, 150, 225, 450, 600];
			var currentLvl = 0;
			var albumsList = [];
			var tblBool = false;
			
			//declare albums table
			var tbl = document.createElement("TABLE");
			tbl.setAttribute("id", "albums");
			tbl.setAttribute("border", "1")
			var tblCaption = tbl.createCaption();
			tblCaption.innerHTML = "Albums: ";
			tblCaption.setAttribute("class", "leftalign");
			var tblRow = tbl.insertRow();
			var cell1 = tblRow.insertCell(0);
			cell1.innerHTML = "<b>Title</b>";
			cell1.setAttribute("class", "initrows");
			var cell2 = tblRow.insertCell(1);
			cell2.innerHTML = "<b>Release date</b>";
			cell2.setAttribute("class", "initrows");
			tblRow.setAttribute("class", "init");
			
			function element(id, action, data, subdata) {
				switch(action){
					case "innerHTML":
						document.getElementById(id).innerHTML = data;
						break;
					
					case "set_a":
						document.getElementById(id).setAttribute(data, subdata);
						break;
					
					case "rm_a":
						document.getElementById(id).removeAttribute(data);
						break;
				}
			}
			
			function poseFunction() {
				element("buttonson", "set_a", "disabled", "");
				var cDown = 10;
				element("buttonson", "innerHTML", cDown);
				var id = setInterval(function(){countTry();}, 1000);
				function countTry() {					
					if (cDown == 0){
						element("buttonson", "innerHTML", "Click me");
						element("buttonson", "rm_a", "disabled");
						compositions += 1;
						experience += (9 + ((Math.floor(Math.random() * Math.floor(50))-25)/10));
						
						if (experience > expBrackets[currentLvl]) {experience -= expBrackets[currentLvl]; currentLvl++;}
						
						element("counter", "innerHTML", "Songs composed: " + compositions.toString());
						element("exp", "innerHTML", "Composing level: " + currentLvl.toString() + " (" + experience.toFixed(1) + "/" + expBrackets[currentLvl].toString() + " exp to next level)");
						clearInterval(id);
						
						if (compositions >= 10) { element("create","rm_a","disabled"); }
					} 
					else{
						cDown += -1;
						document.getElementById("buttonson").innerHTML = cDown; 
					}
				}
				
			}
			function createAlbum() {
				albumName = prompt("Album name: ");
				albumsList.push(albumName);
				
				//if albums table doesn't show, display it
				if(!tblBool){
					document.body.appendChild(tbl);
					
					tblBool = true;
				}
				var albumRow = tbl.insertRow();
				var titleCell = albumRow.insertCell(0);
				var dateCell = albumRow.insertCell(1);
			}
		</script>
		<p id="countdown">Click the button to compose a song! (10 second cooldown)</p>
		<button onclick="poseFunction()" id="buttonson">Click me</button>
		<br><br>
		<button onclick="createAlbum()" id="create" disabled="">Once you've got 10 songs, you may create an album</button>
		<p id="counter">Songs composed: 0</p>
		<p id="exp">Composing level: 0 (0/100 exp to next level)</p>
	</body>
</html>